{% load format %}

<div class="my-2" id="site_sample_content">
    <div class="my-2" style="display:flex;">
        <span><strong>Download Samples:</strong></span>
        <a class="mx-2" target="_blank" href="{% url 'get_dataset' %}?from=site_{{object.pk}}&unique=library&include=samplebatch,sample,layer&extend=sample">
            <i class="icon icon-download"></i></a>
    </div>
    <section>
        <!-- List the sample batches -->
        <ul class="tab" id="samplebatch-list">
            {% for batch in batches %}
            <li id="samplebatch-tab_{{batch.pk}}" class="tab-item {% if forloop.counter == 1 %}active{% endif %} batch"
                data-group="sample-batch"
                data-show="sample-batch-tab_{{batch.pk}}">
                <a class="badge" data-badge="{{batches|lookup:batch}}" style="cursor:pointer;">{{batch.name}}</a>
            </li>
            {% endfor %}
            {% if request.user.is_authenticated %}
            <li id="before-profile-add">
                <span style="margin-bottom:5px;" class="btn btn-primary modal_open"
                        hx-get="{% url 'main_modal_get' %}"
                        hx-vals='{"object":"site_{{object.pk}}", "type":"add_samplebatch"}'
                        hx-target="#modal-blank">
                        Add Batch
                </span>
            </li>
            {% endif %}
        </ul>
        <!-- Now render each batch individually! -->
        {% for batch in batches %}
            <div class="tab-panel" id="sample-batch-tab_{{batch.pk}}" data-group="sample-batch"
                {% if forloop.counter != 1 %}
                style="display: none;"
                {% endif %}
                hx-get="{% url 'main_samplebatch_get' %}?object=samplebatch_{{batch.pk}}"
                hx-trigger="load">
            </div>
        {% endfor %}
    </section>
</div>
{% if sample_references %}
<h5>References</h5>
<table class="table table-striped my-2">
    <tbody id="description-reference-tbody" style="border-top: 1px solid lightgrey;">
        {% for ref in sample_references %}
        {% include 'main/reference/reference-tablerow.html' with display=True %}
        {% endfor %}
    </tbody>
</table>
{% endif %}






