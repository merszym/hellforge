{% extends 'main/base.html' %}
{% block head %}
{% load static %}
<title>Project: {{object}}</title>
{% include 'main/editor/editor-head.html' %}
{% endblock %}
{% block headline %}<a href="{% url 'site_list' %}">{{object.name}}</a>{% endblock %}

{% block body %}
<div class='columns' style="padding:10px;">
    <div class="column col-4" style="position:relative;">
        <h3>Project Description</h3>
        <div style="position:absolute; right:5%; top:10px">
            <a class="btn btn-primary tooltip tooltip-left" href="{% url 'main_project_update' object.pk %}" data-tooltip="Edit Project">
                <i class="icon icon-edit"></i>
            </a>
            <a class="btn btn-primary tooltip tooltip-right" href="{% url 'main_project_close' %}" data-tooltip="Log out">
                <i class="icon icon-shutdown"></i>
            </a>
        </div>
        <div class="my-2">
            <div id="description-description" class="panel">
            </div>
        </div>
    </div>
    <div class="column">
        <div class="my-2">
            <h3>Project Overview</h3>
            <h5>Public Link:</h5>
            <div style="background-color: lightgray;">
                <p>{{request.scheme}}://{{request.get_host}}{% url 'main_project_checkout' object.namespace %}?pw={{public_link_pw}}</p>
            </div>
        </div>
    </div>
</div>
<script>
    // load descriptions
$('document').ready(function(){
    $.ajax({
        type: "GET",
        url: "{% url 'main_render_description' object.project_description.first.pk %}?origin=project_{{object.pk}}",
        }).done(function(html){
            $('#description-description').html(html)
        });
});
</script>

{% endblock %}
